<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">

<head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="The works and thoughts of a game programmer">

<title>Flassari.is  &raquo; Mouse scroll wheel in flash not working in Chrome</title>

<link rel="stylesheet" href="/wp-content/themes/flassari/style.css" type="text/css" media="screen">
<script type="text/javascript" src="/wp-content/themes/flassari/js/swfobject.js"></script>

<link type="text/css" rel="stylesheet" href="/wp-content/themes/flassari/styles/shCore.css">
<link type="text/css" rel="stylesheet" href="/wp-content/themes/flassari/styles/shThemeDefault.css">
<script type="text/javascript" src="/wp-content/themes/flassari/js/shCore.js"></script>
<script type="text/javascript" src="/wp-content/themes/flassari/js/shBrushAS3.js"></script>
<script type="text/javascript" src="/wp-content/themes/flassari/js/shBrushXml.js"></script>
<script type="text/javascript" src="/wp-content/themes/flassari/js/shBrushPhp.js"></script>
<script type="text/javascript" src="/wp-content/themes/flassari/js/shBrushCpp.js"></script>
<script type="text/javascript">SyntaxHighlighter.all();</script>

<meta name="robots" content="max-image-preview:large">
<link rel="dns-prefetch" href="//s.w.org">
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/13.1.0\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/13.1.0\/svg\/","svgExt":".svg","source":{"concatemoji":"httpsflassari.is\/wp-includes\/js\/wp-emoji-release.min.js?ver=5.8.6"}};
			!function(e,a,t){var n,r,o,i=a.createElement("canvas"),p=i.getContext&&i.getContext("2d");function s(e,t){var a=String.fromCharCode;p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,e),0,0);e=i.toDataURL();return p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,t),0,0),e===i.toDataURL()}function c(e){var t=a.createElement("script");t.src=e,t.defer=t.type="text/javascript",a.getElementsByTagName("head")[0].appendChild(t)}for(o=Array("flag","emoji"),t.supports={everything:!0,everythingExceptFlag:!0},r=0;r<o.length;r++)t.supports[o[r]]=function(e){if(!p||!p.fillText)return!1;switch(p.textBaseline="top",p.font="600 32px Arial",e){case"flag":return s([127987,65039,8205,9895,65039],[127987,65039,8203,9895,65039])?!1:!s([55356,56826,55356,56819],[55356,56826,8203,55356,56819])&&!s([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]);case"emoji":return!s([10084,65039,8205,55357,56613],[10084,65039,8203,55357,56613])}return!1}(o[r]),t.supports.everything=t.supports.everything&&t.supports[o[r]],"flag"!==o[r]&&(t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&t.supports[o[r]]);t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&!t.supports.flag,t.DOMReady=!1,t.readyCallback=function(){t.DOMReady=!0},t.supports.everything||(n=function(){t.readyCallback()},a.addEventListener?(a.addEventListener("DOMContentLoaded",n,!1),e.addEventListener("load",n,!1)):(e.attachEvent("onload",n),a.attachEvent("onreadystatechange",function(){"complete"===a.readyState&&t.readyCallback()})),(n=t.source||{}).concatemoji?c(n.concatemoji):n.wpemoji&&n.twemoji&&(c(n.twemoji),c(n.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}</style>
	<link rel="stylesheet" id="wp-block-library-css" href="/wp-includes/css/dist/block-library/style.min.css?ver=5.8.6" type="text/css" media="all">
<meta name="generator" content="WordPress 5.8.6">
<link rel="canonical" href="/2012/08/mouse-scroll-wheel-in-flash-not-working-in-chrome/">
<link rel="shortlink" href="/?p=510">
<script type="text/javascript" src="/wp-includes/js/tw-sack.min.js?ver=1.6.1" id="sack-js"></script>
</head>
<body>


<div id="page">
<div id="header">
	<a href="/"><h1>Flassari.is</h1></a>
</div>
<hr>



	<div id="content" class="widecolumn">

	
		<div class="navigation">
			<div class="alignleft">&laquo; <a href="/2012/07/verifyerror-error-1024-stack-underflow-occurred/" rel="prev">VerifyError: Error #1024: Stack underflow occurred.</a>
</div>
			<div class="alignright">
<a href="/2012/08/switch-case-for-objects-class-type/" rel="next">Switch-case for object&#8217;s class type</a> &raquo;</div>
		</div>

		<div class="post" id="post-510">
			<h2>Mouse scroll wheel in flash not working in Chrome</h2>

			<div class="entry">
				<p>Chrome&#8217;s latest update to version 21 introduced a <a href="http://chrome.blogspot.fi/2012/08/an-even-more-secure-flash-player-for.html">new type of flash player</a> using the <a href="http://en.wikipedia.org/wiki/NPAPI#PPAPI">PPAPI</a> (pepper) plugin architecture.<br>
I noticed that this version of flash started breaking mouse scroll wheel support for some flash content.</p>
<p>Which flash files break and which don&#8217;t depend on one thing; if you are using JavaScript to prevent the default behavior of the mouse scroll wheel or not.</p>
<p>The reason for preventing default mouse scroll wheel behavior is for when you don&#8217;t want the page to scroll when you scroll over the flash content.<br>
To prevent that, developers write JavaScript code (or use libraries like <a href="http://www.libspark.org/wiki/SWFWheel/en">SwfWheel.js</a>) that add an event listener for the &#8220;mousewheel&#8221; or &#8220;DOMMouseScroll&#8221; event, and in the handler call &#8220;<em>evt.preventDefault()</em>&#8221; and/or &#8220;<em>evt.returnValue = false</em>&#8221; to cancel the scroll.</p>
<p>Therein lies the problem, the old NPAPI Flash Player would receive the mouse scroll event even if we prevented the default behavior. Maybe even incorrectly so, since the event was cancelled.<br>
The new PPAPI Flash Player will not receive the event if the default is prevented.</p>
<p>If one were to remove the preventDefault() function, the Flash file would start working correctly again, but the whole page would again start scrolling, which is out of the question.</p>
<p>You will have to not only prevent the default scroll behavior, but also call an external interface function in your flash file to let it know when the user scrolls the mouse wheel.<br>
In my case I was using SwfWheel and only needed a small modification to the library file: in the SWFWheel.getState() function add this code before the &#8220;<em>if (br.mac)</em>&#8221; line:</p>
<pre class="brush:as3">// The new pepper plugin requires chrome to always be hacked.
if (br.chrome)
{
	return STATE_HACKED;
}
</pre>

								<p>Tags: <a href="/tag/chrome/" rel="tag">Chrome</a>, <a href="/tag/mouse/" rel="tag">mouse</a>, <a href="/tag/npapi/" rel="tag">NPAPI</a>, <a href="/tag/pepper/" rel="tag">pepper</a>, <a href="/tag/ppapi/" rel="tag">PPAPI</a>, <a href="/tag/preventdefault/" rel="tag">preventDefault</a>, <a href="/tag/returnvalue/" rel="tag">returnValue</a>, <a href="/tag/scroll/" rel="tag">scroll</a>, <a href="/tag/swfwheel/" rel="tag">SwfWheel</a>, <a href="/tag/wheel/" rel="tag">wheel</a></p>
				<p class="postmetadata alt">
					<small>
						This entry was posted
												on Tuesday, August 14th, 2012 at 08:49						and is filed under <a href="/category/flash/as3/" rel="category tag">AS3</a>, <a href="/category/flash/" rel="category tag">Flash</a>, <a href="/category/html/" rel="category tag">HTML</a>, <a href="/category/javascript/" rel="category tag">JavaScript</a>.
						<br><br>
						The website has been archived and no new comments can be posted.
					</small>
				</p>
			</div>
		</div>

	
<!-- You can start editing here. -->

	<h3 id="comments">10 Responses to &#8220;Mouse scroll wheel in flash not working in Chrome&#8221;</h3>

	<ol class="commentlist">

	
		<li class="alt" id="comment-1762">
			<img alt="" src="https://secure.gravatar.com/avatar/c5d6361cb0fc18e7b484dc865f3776ad?s=32&#038;d=blank&#038;r=g" srcset="https://secure.gravatar.com/avatar/c5d6361cb0fc18e7b484dc865f3776ad?s=64&#038;d=blank&#038;r=g 2x" class="avatar avatar-32 photo" height="32" width="32" loading="lazy">			<cite>menorki</cite> Says:
						<br>

			<small class="commentmetadata"><a href="#comment-1762" title="">August 17th, 2012 at 11:49</a> </small>

			<p>Thanks for the info and the bug fix.</p>
<p>Did you send a ticket on libspark.org ?</p>

		</li>

	
	
		<li id="comment-1769">
			<img alt="" src="https://secure.gravatar.com/avatar/9bee4c3cbb5f7610b21d1583a21968bd?s=32&#038;d=blank&#038;r=g" srcset="https://secure.gravatar.com/avatar/9bee4c3cbb5f7610b21d1583a21968bd?s=64&#038;d=blank&#038;r=g 2x" class="avatar avatar-32 photo" height="32" width="32" loading="lazy">			<cite><a href="http://www.flassari.is/" rel="external nofollow ugc" class="url">Flassari</a></cite> Says:
						<br>

			<small class="commentmetadata"><a href="#comment-1769" title="">August 21st, 2012 at 19:17</a> </small>

			<p>I wanted to but their whole ticket system is in Japanese :/</p>

		</li>

	
	
		<li class="alt" id="comment-1785">
			<img alt="" src="https://secure.gravatar.com/avatar/167790e0eea481ac066df048b59d2f06?s=32&#038;d=blank&#038;r=g" srcset="https://secure.gravatar.com/avatar/167790e0eea481ac066df048b59d2f06?s=64&#038;d=blank&#038;r=g 2x" class="avatar avatar-32 photo" height="32" width="32" loading="lazy">			<cite>Sergiu</cite> Says:
						<br>

			<small class="commentmetadata"><a href="#comment-1785" title="">August 28th, 2012 at 13:02</a> </small>

			<p>I modified the file exactly like you did, but I get &#8220;Uncaught Error: Error calling method on NPObject in SWFWheel.bind&#8221;. I only get this error message in Chrome, in another browsers the library works just fine. Could you please provide a workable demo implementation of a flash/flex project?</p>

		</li>

	
	
		<li id="comment-1786">
			<img alt="" src="https://secure.gravatar.com/avatar/9bee4c3cbb5f7610b21d1583a21968bd?s=32&#038;d=blank&#038;r=g" srcset="https://secure.gravatar.com/avatar/9bee4c3cbb5f7610b21d1583a21968bd?s=64&#038;d=blank&#038;r=g 2x" class="avatar avatar-32 photo" height="32" width="32" loading="lazy">			<cite><a href="http://www.flassari.is/" rel="external nofollow ugc" class="url">Flassari</a></cite> Says:
						<br>

			<small class="commentmetadata"><a href="#comment-1786" title="">August 29th, 2012 at 09:04</a> </small>

			<p>@Sergiu: Try it with the debug flash player from <a href="http://www.adobe.com/support/flashplayer/downloads.html" rel="nofollow ugc">http://www.adobe.com/support/flashplayer/downloads.html</a></p>
<p>It should give you a more descriptive error that your Flash file is most likely throwing.</p>

		</li>

	
	
		<li class="alt" id="comment-1788">
			<img alt="" src="https://secure.gravatar.com/avatar/c32976c243b64be7ceabc9d7191f479a?s=32&#038;d=blank&#038;r=g" srcset="https://secure.gravatar.com/avatar/c32976c243b64be7ceabc9d7191f479a?s=64&#038;d=blank&#038;r=g 2x" class="avatar avatar-32 photo" height="32" width="32" loading="lazy">			<cite>Erik Westington</cite> Says:
						<br>

			<small class="commentmetadata"><a href="#comment-1788" title="">August 29th, 2012 at 17:11</a> </small>

			<p>I immediately switched over to SWFWheel to solve this problem, applying your fix. Very useful, thanks.</p>
<p>Please note this issue arising from the same chromium pepper flash release, it&#8217;s related to default fonts in textfields. <a href="http://code.google.com/p/chromium/issues/detail?id=140415" rel="nofollow ugc">http://code.google.com/p/chromium/issues/detail?id=140415</a></p>

		</li>

	
	
		<li id="comment-1789">
			<img alt="" src="https://secure.gravatar.com/avatar/167790e0eea481ac066df048b59d2f06?s=32&#038;d=blank&#038;r=g" srcset="https://secure.gravatar.com/avatar/167790e0eea481ac066df048b59d2f06?s=64&#038;d=blank&#038;r=g 2x" class="avatar avatar-32 photo" height="32" width="32" loading="lazy">			<cite>Sergiu</cite> Says:
						<br>

			<small class="commentmetadata"><a href="#comment-1789" title="">August 30th, 2012 at 07:54</a> </small>

			<p>Turns out it was a silly error. My stage object was null. Great post!</p>

		</li>

	
	
		<li class="alt" id="comment-1797">
			<img alt="" src="https://secure.gravatar.com/avatar/2fa5427d9a21245d00a531f02d2e20cf?s=32&#038;d=blank&#038;r=g" srcset="https://secure.gravatar.com/avatar/2fa5427d9a21245d00a531f02d2e20cf?s=64&#038;d=blank&#038;r=g 2x" class="avatar avatar-32 photo" height="32" width="32" loading="lazy">			<cite><a href="http://www.spikything.com/" rel="external nofollow ugc" class="url">Liam O'Donnell</a></cite> Says:
						<br>

			<small class="commentmetadata"><a href="#comment-1797" title="">September 10th, 2012 at 16:00</a> </small>

			<p>This must be why my MouseWheelTrap util doesn&#8217;t work in Chrome <a href="http://code.google.com/p/mousewheeltrap" rel="nofollow ugc">http://code.google.com/p/mousewheeltrap</a>. It&#8217;s purpose was to easily prevent simultaneous Flash and browser scrolling, while your mouse is over Flash content.</p>
<p>Wish Adobe would fix this at source, since I can&#8217;t think of any use case where you&#8217;d want both things scrolling at once.</p>
<p>I&#8217;m no JavaScript expert, so would welcome help fixing the MouseWheelTrap utility.</p>

		</li>

	
	
		<li id="comment-1841">
			<img alt="" src="https://secure.gravatar.com/avatar/c32976c243b64be7ceabc9d7191f479a?s=32&#038;d=blank&#038;r=g" srcset="https://secure.gravatar.com/avatar/c32976c243b64be7ceabc9d7191f479a?s=64&#038;d=blank&#038;r=g 2x" class="avatar avatar-32 photo" height="32" width="32" loading="lazy">			<cite>Erik Westington</cite> Says:
						<br>

			<small class="commentmetadata"><a href="#comment-1841" title="">October 2nd, 2012 at 05:45</a> </small>

			<p>I have a follow-up bug to report, also only occurring in Chrome. Scrolling usually works fine, unless you try to scroll when your cursor is over an empty area (ie. nothing rendered). When you put your cursor over a rendered object and scroll, it works again.</p>
<p>Any ideas?</p>

		</li>

	
	
		<li class="alt" id="comment-1869">
			<img alt="" src="https://secure.gravatar.com/avatar/83ace84722b1c4418b3f0b5ace59e25d?s=32&#038;d=blank&#038;r=g" srcset="https://secure.gravatar.com/avatar/83ace84722b1c4418b3f0b5ace59e25d?s=64&#038;d=blank&#038;r=g 2x" class="avatar avatar-32 photo" height="32" width="32" loading="lazy">			<cite>marx</cite> Says:
						<br>

			<small class="commentmetadata"><a href="#comment-1869" title="">October 8th, 2012 at 10:42</a> </small>

			<p>Have you got a working example of this to download and look at? Would be much appreciated. Thanks</p>

		</li>

	
	
		<li id="comment-1876">
			<img alt="" src="https://secure.gravatar.com/avatar/9bee4c3cbb5f7610b21d1583a21968bd?s=32&#038;d=blank&#038;r=g" srcset="https://secure.gravatar.com/avatar/9bee4c3cbb5f7610b21d1583a21968bd?s=64&#038;d=blank&#038;r=g 2x" class="avatar avatar-32 photo" height="32" width="32" loading="lazy">			<cite><a href="http://www.flassari.is/" rel="external nofollow ugc" class="url">Flassari</a></cite> Says:
						<br>

			<small class="commentmetadata"><a href="#comment-1876" title="">October 11th, 2012 at 18:17</a> </small>

			<p>Sure @marx, here&#8217;s the class with the fix: <a href="http://pastebin.com/A2WCjvf5" rel="nofollow ugc">http://pastebin.com/A2WCjvf5</a></p>

		</li>

	
	
	</ol>

 
	
	</div>

<hr>
<div id="footer">
</div>
</div>
<script type="text/javascript" src="/wp-includes/js/wp-embed.min.js?ver=5.8.6" id="wp-embed-js"></script>
</body>
</html>