<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">

<head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="The works and thoughts of a game programmer">

<title>Flassari.is  &raquo; Pie mask in AS3</title>

<link rel="stylesheet" href="/wp-content/themes/flassari/style.css" type="text/css" media="screen">
<script type="text/javascript" src="/wp-content/themes/flassari/js/swfobject.js"></script>

<link type="text/css" rel="stylesheet" href="/wp-content/themes/flassari/styles/shCore.css">
<link type="text/css" rel="stylesheet" href="/wp-content/themes/flassari/styles/shThemeDefault.css">
<script type="text/javascript" src="/wp-content/themes/flassari/js/shCore.js"></script>
<script type="text/javascript" src="/wp-content/themes/flassari/js/shBrushAS3.js"></script>
<script type="text/javascript" src="/wp-content/themes/flassari/js/shBrushXml.js"></script>
<script type="text/javascript" src="/wp-content/themes/flassari/js/shBrushPhp.js"></script>
<script type="text/javascript" src="/wp-content/themes/flassari/js/shBrushCpp.js"></script>
<script type="text/javascript">SyntaxHighlighter.all();</script>

<meta name="robots" content="max-image-preview:large">
<link rel="dns-prefetch" href="//s.w.org">
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/13.1.0\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/13.1.0\/svg\/","svgExt":".svg","source":{"concatemoji":"httpsflassari.is\/wp-includes\/js\/wp-emoji-release.min.js?ver=5.8.6"}};
			!function(e,a,t){var n,r,o,i=a.createElement("canvas"),p=i.getContext&&i.getContext("2d");function s(e,t){var a=String.fromCharCode;p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,e),0,0);e=i.toDataURL();return p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,t),0,0),e===i.toDataURL()}function c(e){var t=a.createElement("script");t.src=e,t.defer=t.type="text/javascript",a.getElementsByTagName("head")[0].appendChild(t)}for(o=Array("flag","emoji"),t.supports={everything:!0,everythingExceptFlag:!0},r=0;r<o.length;r++)t.supports[o[r]]=function(e){if(!p||!p.fillText)return!1;switch(p.textBaseline="top",p.font="600 32px Arial",e){case"flag":return s([127987,65039,8205,9895,65039],[127987,65039,8203,9895,65039])?!1:!s([55356,56826,55356,56819],[55356,56826,8203,55356,56819])&&!s([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]);case"emoji":return!s([10084,65039,8205,55357,56613],[10084,65039,8203,55357,56613])}return!1}(o[r]),t.supports.everything=t.supports.everything&&t.supports[o[r]],"flag"!==o[r]&&(t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&t.supports[o[r]]);t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&!t.supports.flag,t.DOMReady=!1,t.readyCallback=function(){t.DOMReady=!0},t.supports.everything||(n=function(){t.readyCallback()},a.addEventListener?(a.addEventListener("DOMContentLoaded",n,!1),e.addEventListener("load",n,!1)):(e.attachEvent("onload",n),a.attachEvent("onreadystatechange",function(){"complete"===a.readyState&&t.readyCallback()})),(n=t.source||{}).concatemoji?c(n.concatemoji):n.wpemoji&&n.twemoji&&(c(n.twemoji),c(n.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}</style>
	<link rel="stylesheet" id="wp-block-library-css" href="/wp-includes/css/dist/block-library/style.min.css?ver=5.8.6" type="text/css" media="all">
<meta name="generator" content="WordPress 5.8.6">
<link rel="canonical" href="/2009/11/pie-mask-in-as3/">
<link rel="shortlink" href="/?p=240">
<script type="text/javascript" src="/wp-includes/js/tw-sack.min.js?ver=1.6.1" id="sack-js"></script>
</head>
<body>


<div id="page">
<div id="header">
	<a href="/"><h1>Flassari.is</h1></a>
</div>
<hr>



	<div id="content" class="widecolumn">

	
		<div class="navigation">
			<div class="alignleft">&laquo; <a href="/2009/11/wordpress-replaces-two-hyphens-with-one/" rel="prev">WordPress replaces &#8212; with â€“</a>
</div>
			<div class="alignright">
<a href="/2010/02/color-settint-alternative/" rel="next">Color.setTint() alternative (AS3)</a> &raquo;</div>
		</div>

		<div class="post" id="post-240">
			<h2>Pie mask in AS3</h2>

			<div class="entry">
				<p>Sometimes I have the need for a rotational progress bar that acts like a pie growing bigger (or smaller if that strikes your fancy). As usual, I made my own =)<br>
The function drawPieMask takes first the <strong>graphics</strong> object of the displayObject instance and draws a part of pie on it, <strong>percentage</strong> set&#8217;s how big the part is.<br>
If you want to offset the rotation of the pie (it starts to the right by default) you can set the <strong>rotation</strong> parameter. Note that rotation is in radians, not degrees, but you can multiply your degrees by (Math.PI/180) to convert to radians.<br>
Lastly, the <strong>sides</strong> property determines how many sides the circle drawn in the mask has. You can see an example of different pie masks after the code.</p>
<p>To make the code as customizable as possible, it does not make a call to beginFill in case you want to set your own fill (or gradientfill even?).<br>
If you just want to use it as a basic mask, just call beginFill(0) before and endFill() after the call to drawPieMask.</p>
<pre class="brush: as3">function drawPieMask(graphics:Graphics, percentage:Number, radius:Number = 50, x:Number = 0, y:Number = 0, rotation:Number = 0, sides:int = 6):void {
	// graphics should have its beginFill function already called by now
	graphics.moveTo(x, y);
	if (sides < 3) sides = 3; // 3 sides minimum
	// Increase the length of the radius to cover the whole target
	radius /= Math.cos(1/sides * Math.PI);
	// Shortcut function
	var lineToRadians:Function = function(rads:Number):void {
		graphics.lineTo(Math.cos(rads) * radius + x, Math.sin(rads) * radius + y);
	};
	// Find how many sides we have to draw
	var sidesToDraw:int = Math.floor(percentage * sides);
	for (var i:int = 0; i <= sidesToDraw; i++)
		lineToRadians((i / sides) * (Math.PI * 2) + rotation);
	// Draw the last fractioned side
	if (percentage * sides != sidesToDraw)
		lineToRadians(percentage * (Math.PI * 2) + rotation);
}</pre>
<p>Example of different sides values. The last circle has a pie with 3 sides as a mask.<br>
<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="450" height="310"><param name="movie" value="/wp-content/uploads/2009/11/PieMaskExample.swf">
<!--[if !IE]>--><object type="application/x-shockwave-flash" data="/wp-content/uploads/2009/11/PieMaskExample.swf" width="450" height="310"><!--<![endif]--></object></object></p>
<div>
<p><a href="http://www.adobe.com/go/getflashplayer"><img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Get Adobe Flash player"></a></p>
<p><!--[if !IE]>--><!--<![endif]--></p>
<p>You can get the <a href="/wp-content/uploads/2009/11/PieMaskExample.zip">example fla here.</a></p>

								<p>Tags: <a href="/tag/as3/" rel="tag">AS3</a>, <a href="/tag/mask/" rel="tag">mask</a>, <a href="/tag/percentage/" rel="tag">percentage</a>, <a href="/tag/pie/" rel="tag">pie</a>, <a href="/tag/progress/" rel="tag">progress</a>, <a href="/tag/timer/" rel="tag">timer</a></p>
				<p class="postmetadata alt">
					<small>
						This entry was posted
												on Friday, November 13th, 2009 at 17:02						and is filed under <a href="/category/flash/as3/" rel="category tag">AS3</a>, <a href="/category/flash/" rel="category tag">Flash</a>, <a href="/category/math/" rel="category tag">Math</a>.
						<br><br>
						The website has been archived and no new comments can be posted.
					</small>
				</p>
			</div>
		</div>

	
<!-- You can start editing here. -->

	<h3 id="comments">19 Responses to &#8220;Pie mask in AS3&#8221;</h3>

	<ol class="commentlist">

	
		<li class="alt" id="comment-69">
			<img alt="" src="https://secure.gravatar.com/avatar/997cec33a06cb5890f3ff0769f5a68c7?s=32&#038;d=blank&#038;r=g" srcset="https://secure.gravatar.com/avatar/997cec33a06cb5890f3ff0769f5a68c7?s=64&#038;d=blank&#038;r=g 2x" class="avatar avatar-32 photo" height="32" width="32" loading="lazy">			<cite>Nizzle</cite> Says:
						<br>

			<small class="commentmetadata"><a href="#comment-69" title="">November 13th, 2009 at 19:07</a> </small>

			<p>Do you actually know all that Math right from the top of your head? I have no idea how that works, but I thinks it is amazing.</p>

		</li>

	
	
		<li id="comment-70">
			<img alt="" src="https://secure.gravatar.com/avatar/9bee4c3cbb5f7610b21d1583a21968bd?s=32&#038;d=blank&#038;r=g" srcset="https://secure.gravatar.com/avatar/9bee4c3cbb5f7610b21d1583a21968bd?s=64&#038;d=blank&#038;r=g 2x" class="avatar avatar-32 photo" height="32" width="32" loading="lazy">			<cite><a href="http://www.flassari.is/" rel="external nofollow ugc" class="url">Flassari</a></cite> Says:
						<br>

			<small class="commentmetadata"><a href="#comment-70" title="">November 14th, 2009 at 01:15</a> </small>

			<p>Thanks Nizzle,<br>
in this case I knew most of the math beforehand (I like trigonometry) except for the line where I increase the length of the radius, but for that I had to check my <a href="http://en.wikipedia.org/wiki/Trigonometric_function" rel="nofollow">trigonometry cheat sheet</a> =)<br>
I also don&#8217;t just code it directly, I scribble it down on some post-it notes first to get the formulas out of my head.<br>
I hope the function came to good use for you.</p>

		</li>

	
	
		<li class="alt" id="comment-71">
			<img alt="" src="https://secure.gravatar.com/avatar/e5b50ab0e74bfd187fdd27cdbc3759b5?s=32&#038;d=blank&#038;r=g" srcset="https://secure.gravatar.com/avatar/e5b50ab0e74bfd187fdd27cdbc3759b5?s=64&#038;d=blank&#038;r=g 2x" class="avatar avatar-32 photo" height="32" width="32" loading="lazy">			<cite>puha</cite> Says:
						<br>

			<small class="commentmetadata"><a href="#comment-71" title="">November 20th, 2009 at 09:21</a> </small>

			<p>Thanks. The .fla isn&#8217;t in the zip file, only the swf.</p>

		</li>

	
	
		<li id="comment-72">
			<img alt="" src="https://secure.gravatar.com/avatar/9bee4c3cbb5f7610b21d1583a21968bd?s=32&#038;d=blank&#038;r=g" srcset="https://secure.gravatar.com/avatar/9bee4c3cbb5f7610b21d1583a21968bd?s=64&#038;d=blank&#038;r=g 2x" class="avatar avatar-32 photo" height="32" width="32" loading="lazy">			<cite><a href="http://www.flassari.is/" rel="external nofollow ugc" class="url">Flassari</a></cite> Says:
						<br>

			<small class="commentmetadata"><a href="#comment-72" title="">November 20th, 2009 at 10:22</a> </small>

			<p>Oops, thanks for spotting that, I zipped the wrong file.<br>
I uploaded the right one, you might have to clear your cache to get the new one.</p>

		</li>

	
	
		<li class="alt" id="comment-73">
			<img alt="" src="https://secure.gravatar.com/avatar/f6177c952a913368524b3b85235de5df?s=32&#038;d=blank&#038;r=g" srcset="https://secure.gravatar.com/avatar/f6177c952a913368524b3b85235de5df?s=64&#038;d=blank&#038;r=g 2x" class="avatar avatar-32 photo" height="32" width="32" loading="lazy">			<cite><a href="http://chemicalbliss.com/" rel="external nofollow ugc" class="url">KoopaTroopa</a></cite> Says:
						<br>

			<small class="commentmetadata"><a href="#comment-73" title="">May 7th, 2010 at 03:52</a> </small>

			<p>Excellent, just what i needed for my games indicator bars, kudos to you my friend :)</p>

		</li>

	
	
		<li id="comment-74">
			<img alt="" src="https://secure.gravatar.com/avatar/f1689eb56bd051960a6c8555c13decf1?s=32&#038;d=blank&#038;r=g" srcset="https://secure.gravatar.com/avatar/f1689eb56bd051960a6c8555c13decf1?s=64&#038;d=blank&#038;r=g 2x" class="avatar avatar-32 photo" height="32" width="32" loading="lazy">			<cite>Rob</cite> Says:
						<br>

			<small class="commentmetadata"><a href="#comment-74" title="">November 30th, 2010 at 14:55</a> </small>

			<p>Great stuff! I have been trying with this one for hours, then found your solution which is much more elegant than I thought! Thanks a bunch!</p>

		</li>

	
	
		<li class="alt" id="comment-190">
			<img alt="" src="https://secure.gravatar.com/avatar/c8c138dd1a886b0e502063279a16c244?s=32&#038;d=blank&#038;r=g" srcset="https://secure.gravatar.com/avatar/c8c138dd1a886b0e502063279a16c244?s=64&#038;d=blank&#038;r=g 2x" class="avatar avatar-32 photo" height="32" width="32" loading="lazy">			<cite>Sebastian</cite> Says:
						<br>

			<small class="commentmetadata"><a href="#comment-190" title="">June 22nd, 2011 at 11:33</a> </small>

			<p>Great! Thank you</p>

		</li>

	
	
		<li id="comment-386">
			<img alt="" src="https://secure.gravatar.com/avatar/ee513237cb04aaf9fb171996d7f8d5c7?s=32&#038;d=blank&#038;r=g" srcset="https://secure.gravatar.com/avatar/ee513237cb04aaf9fb171996d7f8d5c7?s=64&#038;d=blank&#038;r=g 2x" class="avatar avatar-32 photo" height="32" width="32" loading="lazy">			<cite>Julian</cite> Says:
						<br>

			<small class="commentmetadata"><a href="#comment-386" title="">September 2nd, 2011 at 18:23</a> </small>

			<p>Thank you! This saved me a lot of time.</p>
<p>Later today I just took this brilliant algorithm and coded a class out of it:<br>
<a href="https://github.com/JulianG/as3-PieMask" rel="nofollow ugc">https://github.com/JulianG/as3-PieMask</a></p>

		</li>

	
	
		<li class="alt" id="comment-628">
			<img alt="" src="https://secure.gravatar.com/avatar/e3d584794150b4930fec013325e86660?s=32&#038;d=blank&#038;r=g" srcset="https://secure.gravatar.com/avatar/e3d584794150b4930fec013325e86660?s=64&#038;d=blank&#038;r=g 2x" class="avatar avatar-32 photo" height="32" width="32" loading="lazy">			<cite><a href="http://adam-crowley.com/" rel="external nofollow ugc" class="url">Adam</a></cite> Says:
						<br>

			<small class="commentmetadata"><a href="#comment-628" title="">November 3rd, 2011 at 13:37</a> </small>

			<p>Thank god there are clever people like you to help me out</p>

		</li>

	
	
		<li id="comment-749">
			<img alt="" src="https://secure.gravatar.com/avatar/64bf9ad092520d3e5345d6253b7faab0?s=32&#038;d=blank&#038;r=g" srcset="https://secure.gravatar.com/avatar/64bf9ad092520d3e5345d6253b7faab0?s=64&#038;d=blank&#038;r=g 2x" class="avatar avatar-32 photo" height="32" width="32" loading="lazy">			<cite>pheck</cite> Says:
						<br>

			<small class="commentmetadata"><a href="#comment-749" title="">November 21st, 2011 at 19:03</a> </small>

			<p>Is there any way I can put a timer on the drawPieMask Function so it creates the pie according to some duration specified on the function?</p>

		</li>

	
	
		<li class="alt" id="comment-859">
			<img alt="" src="https://secure.gravatar.com/avatar/9bee4c3cbb5f7610b21d1583a21968bd?s=32&#038;d=blank&#038;r=g" srcset="https://secure.gravatar.com/avatar/9bee4c3cbb5f7610b21d1583a21968bd?s=64&#038;d=blank&#038;r=g 2x" class="avatar avatar-32 photo" height="32" width="32" loading="lazy">			<cite><a href="http://www.flassari.is/" rel="external nofollow ugc" class="url">Flassari</a></cite> Says:
						<br>

			<small class="commentmetadata"><a href="#comment-859" title="">December 7th, 2011 at 08:02</a> </small>

			<p>@pheck: You can create an instance of <a href="http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/Timer.html" rel="nofollow">Timer</a> and call drawPieMask in your event handler.</p>

		</li>

	
	
		<li id="comment-2855">
			<img alt="" src="https://secure.gravatar.com/avatar/19f410fb63b38bc55377b72f1b295562?s=32&#038;d=blank&#038;r=g" srcset="https://secure.gravatar.com/avatar/19f410fb63b38bc55377b72f1b295562?s=64&#038;d=blank&#038;r=g 2x" class="avatar avatar-32 photo" height="32" width="32" loading="lazy">			<cite><a href="http://blog.fathah.net/" rel="external nofollow ugc" class="url">Fathah Noor</a></cite> Says:
						<br>

			<small class="commentmetadata"><a href="#comment-2855" title="">April 10th, 2013 at 05:30</a> </small>

			<p>thanks a lot Flassari and Julian! :)</p>

		</li>

	
	
		<li class="alt" id="comment-6267">
			<img alt="" src="https://secure.gravatar.com/avatar/c7c4b1f3dd00ebba374020393f7ac823?s=32&#038;d=blank&#038;r=g" srcset="https://secure.gravatar.com/avatar/c7c4b1f3dd00ebba374020393f7ac823?s=64&#038;d=blank&#038;r=g 2x" class="avatar avatar-32 photo" height="32" width="32" loading="lazy">			<cite><a href="http://popamihai.com/" rel="external nofollow ugc" class="url">Mihai Popa</a></cite> Says:
						<br>

			<small class="commentmetadata"><a href="#comment-6267" title="">November 28th, 2013 at 08:24</a> </small>

			<p>Did anyone try to use this with the Starling framework?</p>

		</li>

	
	
		<li id="comment-7206">
			<img alt="" src="https://secure.gravatar.com/avatar/687714cb924c20ed688671ea397c4774?s=32&#038;d=blank&#038;r=g" srcset="https://secure.gravatar.com/avatar/687714cb924c20ed688671ea397c4774?s=64&#038;d=blank&#038;r=g 2x" class="avatar avatar-32 photo" height="32" width="32" loading="lazy">			<cite>Artur</cite> Says:
						<br>

			<small class="commentmetadata"><a href="#comment-7206" title="">May 22nd, 2014 at 09:10</a> </small>

			<p>hi, </p>
<p>excellent work, I found it very useful. How do I reverse the mask animation to go from 100 to 0, ie. from fully revealed circle to circle gone completely?</p>

		</li>

	
	
		<li class="alt" id="comment-7207">
			<img alt="" src="https://secure.gravatar.com/avatar/687714cb924c20ed688671ea397c4774?s=32&#038;d=blank&#038;r=g" srcset="https://secure.gravatar.com/avatar/687714cb924c20ed688671ea397c4774?s=64&#038;d=blank&#038;r=g 2x" class="avatar avatar-32 photo" height="32" width="32" loading="lazy">			<cite>Artur</cite> Says:
						<br>

			<small class="commentmetadata"><a href="#comment-7207" title="">May 22nd, 2014 at 09:48</a> </small>

			<p>ok, I&#8217;ve got it sorted :)</p>

		</li>

	
	
		<li id="comment-7264">
			<img alt="" src="https://secure.gravatar.com/avatar/7f7b016f48004facc8b9ec0d54d7aa8f?s=32&#038;d=blank&#038;r=g" srcset="https://secure.gravatar.com/avatar/7f7b016f48004facc8b9ec0d54d7aa8f?s=64&#038;d=blank&#038;r=g 2x" class="avatar avatar-32 photo" height="32" width="32" loading="lazy">			<cite>Thib</cite> Says:
						<br>

			<small class="commentmetadata"><a href="#comment-7264" title="">June 23rd, 2014 at 10:04</a> </small>

			<p>Hey Arthur, how did you do it ? I&#8217;m stuck on this..<br>
Thanks,<br>
Thib</p>

		</li>

	
	
		<li class="alt" id="comment-7358">
			<img alt="" src="https://secure.gravatar.com/avatar/4469509c2f17124af1626f3c6885e312?s=32&#038;d=blank&#038;r=g" srcset="https://secure.gravatar.com/avatar/4469509c2f17124af1626f3c6885e312?s=64&#038;d=blank&#038;r=g 2x" class="avatar avatar-32 photo" height="32" width="32" loading="lazy">			<cite>Sorin</cite> Says:
						<br>

			<small class="commentmetadata"><a href="#comment-7358" title="">January 4th, 2015 at 22:47</a> </small>

			<p>Excellent post! I&#8217;ll try to implement this in Starling, i&#8217;m curious about how this will work from a performance point of view.</p>

		</li>

	
	
		<li id="comment-7520">
			<img alt="" src="https://secure.gravatar.com/avatar/e793151820069540b25641cff5441c15?s=32&#038;d=blank&#038;r=g" srcset="https://secure.gravatar.com/avatar/e793151820069540b25641cff5441c15?s=64&#038;d=blank&#038;r=g 2x" class="avatar avatar-32 photo" height="32" width="32" loading="lazy">			<cite>Zwick</cite> Says:
						<br>

			<small class="commentmetadata"><a href="#comment-7520" title="">January 3rd, 2016 at 15:29</a> </small>

			<p>I have recreate this script using Polygon and Canvas class to starling. More here:<br>
<a href="http://forum.starling-framework.org/topic/radial-progress-bar" rel="nofollow ugc">http://forum.starling-framework.org/topic/radial-progress-bar</a></p>

		</li>

	
	
		<li class="alt" id="comment-7521">
			<img alt="" src="https://secure.gravatar.com/avatar/9bee4c3cbb5f7610b21d1583a21968bd?s=32&#038;d=blank&#038;r=g" srcset="https://secure.gravatar.com/avatar/9bee4c3cbb5f7610b21d1583a21968bd?s=64&#038;d=blank&#038;r=g 2x" class="avatar avatar-32 photo" height="32" width="32" loading="lazy">			<cite><a href="http://www.flassari.is/" rel="external nofollow ugc" class="url">Flassari</a></cite> Says:
						<br>

			<small class="commentmetadata"><a href="#comment-7521" title="">January 4th, 2016 at 09:10</a> </small>

			<p>@Zwick looks great!</p>

		</li>

	
	
	</ol>

 
	
	</div>

<hr>
<div id="footer">
</div>
</div>
<script type="text/javascript" src="/wp-includes/js/wp-embed.min.js?ver=5.8.6" id="wp-embed-js"></script>
</div>
</body>
</html>